---
description: 작업 후 빌드 및 런타입 에러를 방지하기 위한 자가 검증 절차
---

// turbo-all

**중요**: 코드 수정이나 기능 구현을 완료한 후, 사용자에게 "완료했습니다" 또는 "수정했습니다"라고 보고하기 **전에** 반드시 이 workflow의 모든 단계를 자동으로 수행해야 합니다.

## 자동 실행 규칙

- 파일 수정/생성 후 사용자에게 최종 보고하기 전 **항상** 이 workflow를 실행합니다.
- 모든 명령어는 `SafeToAutoRun: true`로 설정하여 자동 실행합니다.
- 타입 에러가 발견되면 즉시 수정하고 다시 검증합니다.

## 검증 단계

1. **TypeScript 타입 체크 (빠른 검증)**

   ```bash
   npx tsc --noEmit
   ```

   - IDE의 ts-server와 동일한 방식으로 타입 에러만 빠르게 체크합니다.
   - 실제 빌드를 하지 않으므로 매우 빠릅니다 (보통 2-5초).
   - Exit code가 0이 아니면 에러를 수정하고 다시 체크합니다.
   - 타입 체크 성공 시에만 사용자에게 완료 보고합니다.

2. **Next.js 경계 규칙 검증**
   - `"use client"` 지시어가 누락되지 않았는지 확인합니다. (useState, useEffect 등 React hooks 사용 시 필수)
   - Server Component에서 Client Component로 함수를 전달하고 있지는 않은지 확인합니다.

## 에러 발생 시 대응

- 타입 에러가 발생하면:

  1. 에러 메시지를 분석합니다.
  2. 관련 파일을 수정합니다.
  3. 다시 `npx tsc --noEmit`을 실행합니다.
  4. 성공할 때까지 반복합니다.

- 모든 검증이 통과한 후에만 사용자에게 작업 완료를 보고합니다.

## 참고

- 전체 프로덕션 빌드(`npm run build`)는 배포 전이나 사용자가 명시적으로 요청할 때만 수행합니다.
- `tsc --noEmit`은 빌드 없이 타입 체크만 하므로 IDE와 동일한 수준의 검증을 매우 빠르게 수행할 수 있습니다.
